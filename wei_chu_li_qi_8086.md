# 微处理器8086

1.Intel 8086CPU是16位微处理器，有16根数据总线和20根地址总线，存储器寻址的空间为1M，端口寻址空间为64K。
 8088CPU有8根数据总线。

2.编程结构
 从功能上看，8086分为两部分，即总线接口部件（BIU）和执行部件（EU）。
 （1）总线接口部件（BLU），功能：负责与存储器及I/O接口之间的数据传送操作。
 具体来看，总线接口部件要从内存取指令送指令队列；CPU执行指令时，总线接口部件配合执行部件，从指定的内存单元或I/O端口取操作数，将操作数传送给执行部件，或将执行部件的操作结果送内存单元或I/O端口。BLU包括段寄存器，指令指针寄存器，地址加法器和指令队列缓冲器。
 （2）执行部件（EU）负责指令的执行，包括通用寄存器，专用寄存器，标志寄存器FR，ALU（算术逻辑部件）。

3.段寄存器
 由CS和IP的内容表示的是下一条待执行的指令的段地址和偏移地址。

4.标志寄存器
 （1）标志寄存器中包含控制标志和状态标志。前者由人为指令设置，后者由程序运行结果决定。
 （2）在8086CPU的标志寄存器中，控制标志位占3位（DF、IF、TF）。
 
5.引脚信号
 （1）AD15~AD0：地址/数据线分时复用，为保证总线周期内地址稳定，应配置地址锁存器，为提高总线驱动能力，应配置总线收发器。
 （2）RESET复位信号：8086/8088的复位信号至少维持4个时钟周期的高电平有效。复位信号到来后，CPU便结束当前操作，并对标志寄存器、IP、DS、SS、ES及指令队列清零，而将CS设置为FFFFH。当复位信号变为低电平时，CPU从FFFF0H开始执行程序。
 （3）NMI非屏蔽中断引脚。NMI中断的中断类型号是02H，其中断向量存放在地址为00H：08H开始的4个存储单元中。
 （4）INTR可屏蔽中断请求信号。需要硬件提供中断类型码。
 （5）MN/MX#：决定CPU处于最小工作模式还是最大工作模式。最小工作模式和最大工作模式的主要差别是单处理器与多处理器的不同。最小模式，就是在系统中只有8086一个微处理器。最大模式需要总线控制器8288。
 （6）引脚BHE信号有效的含义表示数据线D15～D8上的高8位数据有效。
 （7）DT/R#：确定数据的传送方向，高电平数据流出CPU，低电平数据流入CPU。
 （8）M/IO#：高为访问内存，低为访问I/O。
  题目：
  （1）8086CPU在进行I/O写操作时，M/IO和DT/R必须是L，H。
  （2）当微处理器发出地址信息后，当__A__后，通知接口芯片，片选信号CE已稳定，输入口已与数据总线接通，微处理器可以进行操作。
    A．RD有效， M/IO=L	B．RD有效， M/IO=H 
    C．WR有效，M/IO =L	D．WR有效， M/IO=H
 
6.时序
 基本总线周期由4个时钟(CLK)周期组成，按时间顺序定义为T1、T2、T3、T4。
 （1）T1期间，8086发出地址信息，产生地址锁存选通信号ALE（高电平）；
 （2）T2期间，ALE变为低电平，AD15~AD0作为数据线使用，发出读写命令信号RD#、WR#及其它相关信号；
 （3）T3期间完成数据的访问；
 （4）T4结束该总线周期。
 题目：
 （1）在读总线周期中，CPU 从数据总线上读取数据是在T4状态和前一个状态交界的下降沿（包括T4上升沿）。	
 （2）8086CPU与慢速的存储器或I/O接口之间，为了使传送速度能匹配，有时需要在T3和T4状态之间插入若干个等待周期TW。
 （3）8086/8088 读/写总线周期,微处理器是在T3时刻采样READY信号,以便决 定是否插入Tw。

7.中断
 （1）中断分为硬件中断（外部中断）和软件中断。硬件中断又分为非屏蔽中断和屏蔽中断。
   非屏蔽中断是通过CPU的NMI引脚引入的，不受中断允许标志IF的屏蔽。
   可屏蔽中断是通过CPU的INTR引脚进入的，并且只有当中断允许标志IF为1，可屏蔽中断才可进入。
   软件中断的优先级有差别，不可以调整。
   当8086CPU的INTR=“1”时，且中断允许位IF=“1”，则CPU完成当前指令周期后，响应该中断请求，进行中断处理。
 （2）8086/8088的中断是向量中断，其中断服务的入口地址是由中断类型号指向的中断向量表中读出。
   中断向量表存放在存储器的00000H~0003FFH中，存放中断服务程序入口地址。
 （3）8086/8088的中断响应了两个总线周期，从INTA引脚输出了两个负脉冲。
   在第一个/INTA信号时，CPU告诉8259收到中断请求，并通知8259准备好终端类型码；
   在第二个/INTA信号时，CPU通过数据总线读取中断类型码，并转入中断服务程序。
 （4）中断指令
   INTR中断受CLI和STI指令控制。
   为了可以实现中断嵌套,在8086 系统的中断服务程序中,需要写一条STI指令。
   8086系统中,用IRET指令结束可屏蔽的中断服务程序后,标志IF的值是肯定等于1。
   执行8086的IRET中断返回指令后,将从堆栈中弹出6字节数据,存入相应的寄存器。（标志寄存器、CS、IP）
 
 （5）断点中断的中断类型码是3.
   8086CPU对中断请求响应优先级最低的请求是单步中断。
   中断过程中，CPU会自动保存断点地址，恢复断点地址和保存标志寄存器。
   中断系统具有中断优先级管理机制，可以实现中断嵌套。
 
8.存储器编码和I/O编码
 输入/输出端口有两种编址方法，即I/O端口与存储单元统一编址和I/O单独编址。前一种编址的主要优点是功能强和指令灵活 。后一种编址的主要优点是指令运行速度快和增强了程序的可读性。
 
9.8086CPU工作在总线请求方式时，会让出地址和数据总线。