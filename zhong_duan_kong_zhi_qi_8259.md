# 中断控制器8259

1.编程结构
 （1）8259A共有7个可编程的寄存器，它们分别用于接受CPU送来的初始化命令字和操作命令字。
 （2）8259A由IRR（中断请求寄存器）、PR（中断优先级裁决器）、ISR（中断服务寄存器）组成，用来接收和处理从引脚IR7~IR0进入的中断。
 （3）对于8259A的中断请求寄存器IRR，当某一个IRi端呈现高电平时，则表示该端口有中断请求。此后，逻辑电路会根据中断屏蔽寄存器IMR决定是否进入中断优先级裁决器做裁决。（IRi->IMR->IRR->PR->ISR）
 中断屏蔽字OCW1中对应位为1表示被屏蔽，禁止外设向CPU发中断请求。OCW1可以多次设置。
 ISR用于记忆正在处理中的中断。
 （4）一个8259可提供8个中断类型号。

2.工作方式
 （1）优先级设置方式：全嵌套方式、特殊全嵌套方式、优先级自动循环方式、优先级特殊循环方式。
   全嵌套方式中，中断请求按优先级0~7进行处理，0级最高。当一个中断被响应时，中断类型号被放到数据总线上，当前中断服务寄存器ISR中对应位ISn被置1，然后进入中断服务程序。一般情况下（除了中断自动结束方式），在CPU中发出中断结束命令EOI之前，此位一直保持1。（EOI用于全嵌套，清ISR中某位，默认进入完全嵌套）
   全嵌套情况下，如果新收到的中断请求优先级比当前中断的优先级高，则执行中断嵌套。
   特殊全嵌套下，如果新收到的中断请求优先级>=当前中断的优先级，都会执行中断嵌套。
   
 （2）屏蔽中断源的方式：普通屏蔽方式、特殊屏蔽方式。
 （3）结束中断处理的方式：中断自动结束方式、一般的中断结束方式、特殊的中断结束方式。
 （4）连接系统总线的方式：缓冲方式、非缓冲方式。
 （5）引入中断请求的方式：边沿触发方式、电平触发方式、中断查询方式。
 
 
 1.	8259A要求无论采用何种触发方式，中断请求信号的高电平状态保持到__C___。
	    A．第二个中断响应信号INTA有效后     
B．第二个中断响应信号INTA有效之前	
C．第一个中断响应信号INTA有效之后   
D．第一个中断响应信号INTA有效之前
5.	当多片8259A级联使用时，对于主8259A，采用(  B   )优先管理方式
A．完全嵌套    B．特殊全嵌套     C．自动循环     D．特殊循环
14.	若8259A工作在优先级自动循环方式，则IRQ4的中断请求被响应并且服务完毕后，优先权最高的中断源是___B____ 。
	A．IRQ3	B．IRQ5	C．IRQ0	D．IRQ4
15.	PC/XT机中若对从片8259A写入的ICW2是70H，则该8259A芯片的IRQ5的中断类型号是 ____C___
	A．70H	B．73H	C．75H	D．77H	
16.	PC/XT机中若对从片8259A写入的ICW2是70H，则该8259A芯片的IRQ5的中断矢量存储的地址是___D___。
A．75H     B．280H	C．300H	D．1D4H
17.	3片8259A级联起来，可管理___B___ 级中断。
A．24	B．22	C．20	D．16	
18.	要管理64级可屏蔽中断，需要级联的8259A芯片数为( D)
　　A.4片               B.8片
　　C.10片              D.9片
20.	以下说法正确的是__B_。
A．在级联的方式下，可以在主片采用中断自动结束方式
B．在电平触发方式中，中断请求信号必须在得到响应后及时撤销
C．在级联的方式下，主片可以不设置ICW3，但从片必须设置
D．中断服务子程序发出中断结束命令，马上返回断点
21.	在中断方式下，外设数据输入到内存的路径是___D_
A．外设→数据总线→内存	B．外设→数据总线→CPU→内存
C．外设→CPU→DMAC→内存	D．外设→I∕O接口→CPU→内存
25.	当多片8259A级联使用时，对于主8259A，级联信号CAS0-CAS2是_B_，对于从8259A级联信号CAS0-CAS2是__P224最下面 
A．输入信号，输出信号      B．输出信号，输入信号
C．输入信号，输入信号      D．输出信号，输出信号

27.	8088/8086CPU在响应8259的中断过程中，连续执行两个`INTA*` 中断响应周期，第二个中断响应周期是（ C  ）。 
A.  读取8259中OCW3的内容  B.  读取8259中断屏蔽寄存器的内容 
C.  读取中断类型码           D.  清除中断申请寄存器IRRi
3.	一片8259 A能管理8级中断，最多可以用9片8259A来构成64级的主从式中断系统。
4.	8259A的INT是和CPU的INTR端相连，用来向CPU发出中断请求；INTA用来接收来自CPU的中断应答的信号。
7.	设8086系统中采用单片8259A，其8259A的ICW2=32H，则对应IR5的中断类型号为35H，它的中断入口地址在中断向量表中的地址为D4H。
8.	在特殊全嵌套方式下，8259 可响应同级中断请求。
9.	8259A 芯片包含2个口地址，它进行中断结束处理的方式有中断自动结束方式、 一般的中断结束方式、 特殊的中断结束方式 三种。
10.	多片8259A级连时，主片8259A的CAS2~CAS0应连至从片8259A的CS2~CS0引脚；从片8259A的INT应连至主片8259A的IR引脚；主片8259A的INT应连至CPU的INTR引脚。未验证
11.	CPU响应中断后将FR标志寄存器入栈保存，然后自动将IF标志和TF标志复位。若要实现中断嵌套，必须在中断服务子程序中执行一条STI指令。
12.	8259在初始化时，有两个命令字ICW1、ICW2必须设置。
13.	当一个级联的8259系统中，一个中断处理程序结束时，要发出2次中断结束命令。
14.	中断返回指令是IRET，该指令将堆栈中保存的断点弹出后依次装入IP寄存器和CS寄存器中，将堆栈中保存的标志装入标志寄存器中。
17．在一个8086CPU和单片8259A组成的系统中，试说明：  
　　(1)8086CPU在响应可屏蔽中断的条件是什么？
8259响应可屏蔽中断的条件是有中断请求信号INTR有效，IF为1允许中断，执行完当前正在执行的指令。

　　(2)8086CPU在响应中断过程中，连续执行两个INTA周期，其作用是？ 
在第一个/INTA信号时，CPU告诉8259收到中断请求，并通知8259准备好终端类型码    在第二个/INTA信号时，8259通过数据总线将中断类型码给CPU，CPU转入中断服务程序。
 
　　(3)假如8259A已被编程，ICW2=0AH，若连接在8259A的IR3端的外设提出中断申请，它的中断向量的存放地址是什么？
由ICW2可知中断类型码的高5位为00001而中断连接再IR3故中断类型码应为00001011=0BH。
中断向量应存放在0B*4=2CH开始的四个单元中。
